<div class="container-fluid py-4">
  <form [formGroup]="formularioCobro" *ngIf="formularioCobro">
    <div class="row">
      <!-- Columna izquierda - Controles -->
      <div class="col-md-3">
        
        <!-- Sección Renta -->
        <div class="card mb-4">
          <div class="card-header bg-light">
            <h6 class="mb-0 text-dark">Renta</h6>
          </div>
          <div class="card-body">
            <div class="d-grid gap-2 mb-3">
              <button type="button" class="btn btn-outline-secondary btn-sm">Renta Anual</button>
              <button type="button" class="btn btn-outline-secondary btn-sm">Renta Semestral</button>
              <button type="button" class="btn btn-outline-secondary btn-sm">Renta Total</button>
            </div>
            
            <!-- Campo Renta Semestral -->
            <div class="mb-3">
              <label class="form-label small" for="rentaSemestral">Renta Semestral</label>
              <input type="number" 
                     class="form-control form-control-sm" 
                     id="rentaSemestral"
                     formControlName="rentaSemestral"
                     [class.is-invalid]="hasError('rentaSemestral')"
                     placeholder="Ingrese renta semestral">
              <div class="invalid-feedback" *ngIf="hasError('rentaSemestral')">
                {{ getErrorMessage('rentaSemestral') }}
              </div>
            </div>

            <!-- Campo Renta Total -->
            <div class="mb-3">
              <label class="form-label small" for="rentaTotal">Renta Total</label>
              <input type="number" 
                     class="form-control form-control-sm" 
                     id="rentaTotal"
                     formControlName="rentaTotal"
                     placeholder="0">
            </div>
          </div>
        </div>

        <!-- Sección Tarifa -->
        <div class="card mb-4">
          <div class="card-header bg-light">
            <h6 class="mb-0 text-dark">Tarifa</h6>
          </div>
          <div class="card-body">
            <div class="d-grid gap-2 mb-3">
              <button type="button" class="btn btn-outline-secondary btn-sm">Tarifa Anual</button>
              <button type="button" class="btn btn-outline-secondary btn-sm">Tarifa Semestral</button>
              <button type="button" class="btn btn-outline-secondary btn-sm">Tarifa Total</button>
            </div>
            
            <!-- Campo Tarifa Semestral -->
            <div class="mb-3">
              <label class="form-label small" for="tarifaSemestral2">Tarifa Semestral</label>
              <input type="number" 
                     class="form-control form-control-sm" 
                     id="tarifaSemestral2"
                     formControlName="tarifaSemestral2"
                     [class.is-invalid]="hasError('tarifaSemestral2')"
                     placeholder="Ingrese tarifa semestral">
              <div class="invalid-feedback" *ngIf="hasError('tarifaSemestral2')">
                {{ getErrorMessage('tarifaSemestral2') }}
              </div>
            </div>

            <!-- Campo Tarifa Total -->
            <div class="mb-3">
              <label class="form-label small" for="tarifaTotal2">Tarifa Total</label>
              <input type="number" 
                     class="form-control form-control-sm" 
                     id="tarifaTotal2"
                     formControlName="tarifaTotal2"
                     placeholder="0">
            </div>
            
            <!-- Campos adicionales UTM -->
            <div class="mb-2">
              <label class="form-label small" for="totalPagarUTM">Total a Pagar UTM</label>
              <input type="number" 
                     class="form-control form-control-sm" 
                     id="totalPagarUTM"
                     formControlName="totalPagarUTM"
                     placeholder="0">
            </div>
            <div class="mb-2">
              <label class="form-label small" for="valorUTM">Valor UTM</label>
              <input type="number" 
                     class="form-control form-control-sm" 
                     id="valorUTM"
                     formControlName="valorUTM"
                     placeholder="0">
            </div>
            <div class="mb-3">
              <label class="form-label small" for="totalPagar">Total a Pagar</label>
              <input type="number" 
                     class="form-control form-control-sm bg-light" 
                     id="totalPagar"
                     formControlName="totalPagar"
                     placeholder="0"
                     readonly>
              <small class="form-text text-muted">
                <i class="fas fa-calculator me-1"></i>
                Calculado automáticamente: Total UTM × Valor UTM
              </small>
            </div>
          </div>
        </div>
      </div>

      <!-- Columna derecha - Secciones de Renta y Tarifa -->
      <div class="col-md-9">
        
        <!-- SECCIÓN RENTA -->
        <div class="card mb-4">
          <div class="card-header bg-primary text-white">
            <h6 class="mb-0">
              <i class="fas fa-money-bill-wave me-2"></i>
              RENTA
            </h6>
          </div>
          <div class="card-body">
            <div class="row">
              <!-- Selector de Semestre Renta -->
              <div class="col-md-2">
                <span class="form-label small">Semestre</span>
                <div class="d-flex align-items-center">
                  <div class="form-check me-2">
                    <input class="form-check-input" 
                           type="radio" 
                           name="semestreRenta" 
                           id="rentaSem1" 
                           value="1"
                           formControlName="semestreSeleccionadoRenta">
                    <label class="form-check-label" for="rentaSem1">1</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" 
                           type="radio" 
                           name="semestreRenta" 
                           id="rentaSem2"
                           value="2"
                           formControlName="semestreSeleccionadoRenta">
                    <label class="form-check-label" for="rentaSem2">2</label>
                  </div>
                </div>
              </div>
              
              <!-- Notificación Renta -->
              <div class="col-md-2">
                <label class="form-label small" for="rentaFechaNotificacion">Notificación</label>
                <input type="date" 
                       class="form-control form-control-sm" 
                       id="rentaFechaNotificacion"
                       formControlName="rentaFechaNotificacion">
              </div>
              
              <!-- Inicio Cobro Renta -->
              <div class="col-md-2">
                <label class="form-label small" for="rentaFechaInicioCobro">Inicio Cobro</label>
                <input type="date" 
                       class="form-control form-control-sm" 
                       id="rentaFechaInicioCobro"
                       formControlName="rentaFechaInicioCobro">
              </div>
              
              <!-- Término Cobro Renta -->
              <div class="col-md-2">
                <label class="form-label small" for="rentaFechaTerminoCobro">Término Cobro</label>
                <input type="date" 
                       class="form-control form-control-sm" 
                       id="rentaFechaTerminoCobro"
                       formControlName="rentaFechaTerminoCobro">
              </div>
              
              <!-- Días Cobro Renta -->
              <div class="col-md-2">
                <label class="form-label small" for="rentaDiasCobro">Días Cobro</label>
                <input type="number" 
                       class="form-control form-control-sm bg-light" 
                       id="rentaDiasCobro"
                       formControlName="rentaDiasCobro"
                       readonly>
              </div>
            </div>
          </div>
        </div>

        <!-- SECCIÓN TARIFA -->
        <div class="card mb-4">
          <div class="card-header bg-info text-white">
            <h6 class="mb-0">
              <i class="fas fa-calculator me-2"></i>
              TARIFA
            </h6>
          </div>
          <div class="card-body">
            <div class="row">
              <!-- Selector de Semestre Tarifa -->
              <div class="col-md-2">
                <span class="form-label small">Semestre</span>
                <div class="d-flex align-items-center">
                  <div class="form-check me-2">
                    <input class="form-check-input" 
                           type="radio" 
                           name="semestreTarifa2" 
                           id="tarifaSem1_2" 
                           value="1"
                           formControlName="semestreSeleccionadoTarifa2">
                    <label class="form-check-label" for="tarifaSem1_2">1</label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" 
                           type="radio" 
                           name="semestreTarifa2" 
                           id="tarifaSem2_2"
                           value="2"
                           formControlName="semestreSeleccionadoTarifa2">
                    <label class="form-check-label" for="tarifaSem2_2">2</label>
                  </div>
                </div>
              </div>
              
              <!-- Notificación Tarifa -->
              <div class="col-md-2">
                <label class="form-label small" for="tarifaFechaNotificacion2">Notificación</label>
                <input type="date" 
                       class="form-control form-control-sm" 
                       id="tarifaFechaNotificacion2"
                       formControlName="tarifaFechaNotificacion2">
              </div>
              
              <!-- Inicio Cobro Tarifa -->
              <div class="col-md-2">
                <label class="form-label small" for="tarifaFechaInicioCobro2">Inicio Cobro</label>
                <input type="date" 
                       class="form-control form-control-sm" 
                       id="tarifaFechaInicioCobro2"
                       formControlName="tarifaFechaInicioCobro2">
              </div>
              
              <!-- Término Cobro Tarifa -->
              <div class="col-md-2">
                <label class="form-label small" for="tarifaFechaTerminoCobro2">Término Cobro</label>
                <input type="date" 
                       class="form-control form-control-sm" 
                       id="tarifaFechaTerminoCobro2"
                       formControlName="tarifaFechaTerminoCobro2">
              </div>
              
              <!-- Días Cobro Tarifa -->
              <div class="col-md-2">
                <label class="form-label small" for="tarifaDiasCobro2">Días Cobro</label>
                <input type="number" 
                       class="form-control form-control-sm bg-light" 
                       id="tarifaDiasCobro2"
                       formControlName="tarifaDiasCobro2"
                       readonly>
              </div>
            </div>
          </div>
        </div>

        <!-- Botones de acción -->
        <div class="text-end">
          <button type="button" class="btn btn-warning btn-sm me-2" (click)="debugFormulario()">Debug</button>
          <button type="button" class="btn btn-secondary me-2" (click)="onCancel()">Cancelar</button>
          <button type="submit" class="btn btn-primary" (click)="onSubmit()">Nuevo</button>
        </div>
      </div>
    </div>
  </form>
</div>
